# user-service-spring
simple user service build on Spring

**Необходимо для запуска:**
* Java 8
* Maven 
* PostgreSQL [on Postgresql.org](https://www.postgresql.org)
* Redis [on Redis.io](https://redis.io)

**Endpoints:**

    /users
        post - создать нового пользователя
        
        Тело запроса:
        {"username":"Vinny Puh","email":"vinny_puh@domain.net","phone":"9001234560"}
    
    /users/{id}
        get - получить инфо о пользователе
        
    /users/{id}/status
        get - получить статус пользователя
        post - сменить статус пользователя
        
        Тело запроса:
        {"userStatus":"online"}
 
В корне проекта находится коллекция postman с запросами

**Описание:**
* Для запуска выполнить mvn tomcat7:run
* Перед запуском сервиса необходимо создать БД test и в ней таблицу users (init_service_database.sql)
* Информация о пользователе хранится в БД PostgreSQL (использовалась 10-ая версия)
* Информация о статусе хранится в Redis
* Настройки подключения находятся в application.properties
* Тесты работают со встроенными БД hsqldb и Redis

>**Задание**
>Написать серверную часть Web-приложения согласно следующим требованиям:
> 
> * Средства разработки: Java 1.7 (или выше)
> * Инструменты: Spring Framework
> * Протокол: HTTP
> * База данных: PostgreSQL
> 
> Функционал:
> 
> Добавление нового пользователя. Передаем на сервер данные пользователя
> (имя пользователя, email, phoneNumber и т.д.). Сохраняем информацию в 
> базе данных. Ответ сервера — уникальный ID нового пользователя.
> 
> Получение информации о пользователе. Передаем на сервер уникальный ID 
> пользователя. Читаем информацию из базы данных. Ответ сервера — данные
> пользователя.
> 
> Изменение статуса пользователя (Online, Away, Offline). Передаем на 
> сервер уникальный ID пользователя и новый статус. Изменяем статус 
> пользователя. Ответ сервера — уникальный ID пользователя, новый и 
> предыдущий статус.
> 
> Перевод в статус Away должен делаться автоматически через 5 минут
> после  последнего изменения статуса на online. Таким образом, если 
> “подтверждать” статус online пользователя каждые 5 минут - 
> автоматического перехода в Away не должно быть.
> 
> Обязательные требования: — RESTful. — Все данные в формате JSON. —
> Обработка ошибок.
